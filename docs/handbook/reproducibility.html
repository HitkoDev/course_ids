<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Reproducible research | Introduction to data science</title>
  <meta name="description" content="Course notes" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Reproducible research | Introduction to data science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://fri-datascience.github.io/course_itds/" />
  
  <meta property="og:description" content="Course notes" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Reproducible research | Introduction to data science" />
  
  <meta name="twitter:description" content="Course notes" />
  

<meta name="author" content="Slavko Žitnik, Tomaž Curk, Erik Štrumbelj" />


<meta name="date" content="2019-10-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="python-introduction-chapter.html"/>
<link rel="next" href="scraping.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to data science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="what-is-data-science-anyway.html"><a href="what-is-data-science-anyway.html"><i class="fa fa-check"></i>What is data science anyway?</a><ul>
<li class="chapter" data-level="0.1" data-path="what-is-data-science-anyway.html"><a href="what-is-data-science-anyway.html#the-role-of-this-course"><i class="fa fa-check"></i><b>0.1</b> The role of this course</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html"><i class="fa fa-check"></i><b>1</b> Python programming language</a><ul>
<li class="chapter" data-level="1.1" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#basic-characteristics"><i class="fa fa-check"></i><b>1.1</b> Basic characteristics</a></li>
<li class="chapter" data-level="1.2" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#why-python"><i class="fa fa-check"></i><b>1.2</b> Why Python?</a></li>
<li class="chapter" data-level="1.3" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#setting-up-the-environment"><i class="fa fa-check"></i><b>1.3</b> Setting up the environment</a><ul>
<li class="chapter" data-level="1.3.1" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#anaconda-distribution-installation"><i class="fa fa-check"></i><b>1.3.1</b> Anaconda distribution installation</a></li>
<li class="chapter" data-level="1.3.2" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#pure-python-distribution-installation"><i class="fa fa-check"></i><b>1.3.2</b> Pure Python distribution installation</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#installing-dependencies"><i class="fa fa-check"></i><b>1.4</b> Installing dependencies</a></li>
<li class="chapter" data-level="1.5" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#jupyter-notebooks"><i class="fa fa-check"></i><b>1.5</b> Jupyter notebooks</a><ul>
<li class="chapter" data-level="1.5.1" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#running-a-jupyter-notebook"><i class="fa fa-check"></i><b>1.5.1</b> Running a Jupyter notebook</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#short-introduction-to-python"><i class="fa fa-check"></i><b>1.6</b> Short introduction to Python</a><ul>
<li class="chapter" data-level="" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="1.6.1" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#flow-control"><i class="fa fa-check"></i><b>1.6.1</b> Flow control</a></li>
<li class="chapter" data-level="1.6.2" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#functions"><i class="fa fa-check"></i><b>1.6.2</b> Functions</a></li>
<li class="chapter" data-level="1.6.3" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#classes-and-objects"><i class="fa fa-check"></i><b>1.6.3</b> Classes and objects</a></li>
<li class="chapter" data-level="1.6.4" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#reading-and-writing-files"><i class="fa fa-check"></i><b>1.6.4</b> Reading and writing files</a></li>
<li class="chapter" data-level="1.6.5" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#python-ides-and-code-editors"><i class="fa fa-check"></i><b>1.6.5</b> Python IDE’s and code editors</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#python-ecosystem-for-data-science"><i class="fa fa-check"></i><b>1.7</b> Python ecosystem for Data Science</a></li>
<li class="chapter" data-level="1.8" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#further-reading-and-references"><i class="fa fa-check"></i><b>1.8</b> Further reading and references</a></li>
<li class="chapter" data-level="1.9" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#learning-outcomes"><i class="fa fa-check"></i><b>1.9</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.10" data-path="python-introduction-chapter.html"><a href="python-introduction-chapter.html#practice-problems"><i class="fa fa-check"></i><b>1.10</b> Practice problems</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>2</b> Reproducible research</a><ul>
<li class="chapter" data-level="2.1" data-path="reproducibility.html"><a href="reproducibility.html#scientific-inquiry"><i class="fa fa-check"></i><b>2.1</b> Scientific inquiry</a></li>
<li class="chapter" data-level="2.2" data-path="reproducibility.html"><a href="reproducibility.html#from-principles-to-practice"><i class="fa fa-check"></i><b>2.2</b> From principles to practice</a><ul>
<li class="chapter" data-level="2.2.1" data-path="reproducibility.html"><a href="reproducibility.html#preregistration---the-future-standard"><i class="fa fa-check"></i><b>2.2.1</b> Preregistration - the future standard</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="reproducibility.html"><a href="reproducibility.html#reproducibility-tools-in-r"><i class="fa fa-check"></i><b>2.3</b> Reproducibility tools in R</a><ul>
<li class="chapter" data-level="" data-path="reproducibility.html"><a href="reproducibility.html#r-markdown"><i class="fa fa-check"></i>R Markdown</a></li>
<li class="chapter" data-level="" data-path="reproducibility.html"><a href="reproducibility.html#r-notebook"><i class="fa fa-check"></i>R Notebook</a></li>
<li class="chapter" data-level="" data-path="reproducibility.html"><a href="reproducibility.html#sweave"><i class="fa fa-check"></i>Sweave</a></li>
<li class="chapter" data-level="" data-path="reproducibility.html"><a href="reproducibility.html#shiny-web-apps-and-dashboards"><i class="fa fa-check"></i>Shiny web apps and dashboards</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="reproducibility.html"><a href="reproducibility.html#reproducibility-tools-in-python"><i class="fa fa-check"></i><b>2.4</b> Reproducibility tools in Python</a><ul>
<li class="chapter" data-level="" data-path="reproducibility.html"><a href="reproducibility.html#jupyter-dashboards"><i class="fa fa-check"></i>Jupyter Dashboards</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reproducibility.html"><a href="reproducibility.html#further-reading-and-references-1"><i class="fa fa-check"></i><b>2.5</b> Further reading and references</a></li>
<li class="chapter" data-level="2.6" data-path="reproducibility.html"><a href="reproducibility.html#learning-outcomes-1"><i class="fa fa-check"></i><b>2.6</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.7" data-path="reproducibility.html"><a href="reproducibility.html#practice-problems-1"><i class="fa fa-check"></i><b>2.7</b> Practice problems</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>3</b> Web scraping</a><ul>
<li class="chapter" data-level="3.1" data-path="scraping.html"><a href="scraping.html#introduction-to-web-data-extraction"><i class="fa fa-check"></i><b>3.1</b> Introduction to Web data extraction</a><ul>
<li class="chapter" data-level="" data-path="scraping.html"><a href="scraping.html#the-challenges-of-web-data-extraction"><i class="fa fa-check"></i>The challenges of Web data extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="scraping.html"><a href="scraping.html#web-wrapper"><i class="fa fa-check"></i><b>3.2</b> Web wrapper</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scraping.html"><a href="scraping.html#html-dom"><i class="fa fa-check"></i><b>3.2.1</b> HTML DOM</a></li>
<li class="chapter" data-level="3.2.2" data-path="scraping.html"><a href="scraping.html#xpath"><i class="fa fa-check"></i><b>3.2.2</b> XPath</a></li>
<li class="chapter" data-level="3.2.3" data-path="scraping.html"><a href="scraping.html#modern-web-sites-and-js-frameworks"><i class="fa fa-check"></i><b>3.2.3</b> Modern Web sites and JS frameworks</a></li>
<li class="chapter" data-level="3.2.4" data-path="scraping.html"><a href="scraping.html#crawling-resources-and-policies"><i class="fa fa-check"></i><b>3.2.4</b> Crawling, resources and policies</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="scraping.html"><a href="scraping.html#further-reading-and-references-2"><i class="fa fa-check"></i><b>3.3</b> Further reading and references</a></li>
<li class="chapter" data-level="3.4" data-path="scraping.html"><a href="scraping.html#learning-outcomes-2"><i class="fa fa-check"></i><b>3.4</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.5" data-path="scraping.html"><a href="scraping.html#practice-problems-2"><i class="fa fa-check"></i><b>3.5</b> Practice problems</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://datascience.fri.uni-lj.si/" target="blank">Data Science Master's Program</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reproducibility" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Reproducible research</h1>
<div id="scientific-inquiry" class="section level2">
<h2><span class="header-section-number">2.1</span> Scientific inquiry</h2>
<p>The term <em>data science</em> contains the word science. It is our view that data science is more or less synonimous with with modern empirical science and as such it should adhere to the standards for scientific inquiry.</p>
<p>Ideally, scientific inquiry would always be objective and correct. However, these are unattainable ideals! Science will always be subjective at least in the sense of what we investigate and how we choose to investigate it. And scientists like all people, even with the best intentions and practices, make mistakes. Instead, the realistic standard is lower, albeit still surprisingly difficult to attain - research should be <strong>reproducible</strong>.</p>
<p>We will borrow two definitions from the <a href="https://www.amstat.org/asa/files/pdfs/POL-ReproducibleResearchRecommendations.pdf">American Statistical Association</a>:</p>
<blockquote>
<p><strong>Reproducibility:</strong> A study is reproducible if you can take the original data and the
computer code used to analyze the data and reproduce all of the numerical findings
from the study.</p>
</blockquote>
<blockquote>
<p><strong>Replicability:</strong> This is the act of repeating an entire study, independently of the original
investigator without the use of original data (but generally using the same methods).</p>
</blockquote>
<p>In other words, reproducibilty refers to providing a complete and unambiguous description of the entire process from the original raw data to the final numerical results. Reproducibility does not concern itself with the correctness of the results or the process. Our research might even have major bugs in the code or completely flawed methodology, but if it is reproducible, those bugs and those flaws are transparent and will be found by those trying to reproduce or replicate our results. That is, as long as our research is reproducible, scientific critique and progress can be made! However, <strong>if our research is not reproducible it is of much less value!</strong></p>
<p><strong>Reproducibility will be our minimum standard for scientific enquiry</strong> and is also a prerequisite for replicability. Replicability, on the other hand, does concern itself with the correctness of the original research. If we independently repeat a study, we expect to get the same results or at least within some margin of error due to sampling and other sources of variability. Sometimes we might replicate our own study to validate it, but in most cases, replication of our studies is done by others.</p>
</div>
<div id="from-principles-to-practice" class="section level2">
<h2><span class="header-section-number">2.2</span> From principles to practice</h2>
<p>Perfect reproducibility is also unattainable, because not all factors can be feasibly accounted for (time, location, hardware used, etc.). Instead, we will strive for a high but practically feasible level of reproducibility. We will also introduce the practical dimension of how <em>easy to reproduce</em> research is. For example, if we precisely describe all data manipulations in a text document, the data manipulation part of our research will be reproducible. However, it will be much more difficult to reproduce than, for example, if we provided well-documented code that did the same manipulations.</p>
<p>The modern standard for reproduciblity from data to results is to use computer code for everything. This includes even minimal changes to the original data (for example, renaming a column), generating and including plots and tables and even single-number data in the text of our report or paper. Computer code is, by definition, clear and unambiguous - there is no room for misinterpretation of what has been done. And, if we have everything in code, we completely avoid the possiblity of introducing errors or undetectable changes through manual manipulation of the data or copying the results</p>
<p>Such code together with the original data and a precise description of the platform and software used (relevant hardware, operating system, packages, including versions) constitutes as highly and easily reproducible research. This process can be made much easier with the use of standard tools. In particular, integrated analyses and reports, such as Jupyter notebooks and R markdown and notebooks, which we introduce later in the chapter.</p>
<div id="preregistration---the-future-standard" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Preregistration - the future standard</h3>
<p>As we already discussed above, reproduciblity is concerned only with the completeness and unambiguity of the description of the study. All studies should be reproducible, but we expect that some studies will not replicate. Some due to the inherent risk of statistical procedures, some due to researchers’ mistakes and some due to accidental or deliberate manipulation of the <em>researcher’s degrees of freedom</em> or <em>data dredging</em>. These refer to the choices that we make during a study (some of which should strictly be made before the study). For example:</p>
<ul>
<li>the researcher chooses the method or statistical test that confirms the desired hypothesis,</li>
<li>the researcher selects the hypotheses only after seeing the data,</li>
<li>the researcher splits the data into subgroups that lead to desired results,</li>
<li>and many others.</li>
</ul>
<p>In order to deal with this problem and enforce a higher standard of research (and subsequently fewer studies that do not replicate) <strong>preregistration</strong> is very slowly but surely becoming the norm for professional research. In essence, preregistration is the practice of registering all relevant aspects of a scientific study (how the data will be collected, hypotheses, methods used, etc.) before we begin with the study itself. Preregistration is made with some central authority, such as the <a href="https://osf.io/">Open science framework</a> and many reputable scientific journals already promote and support preregistered research.</p>
</div>
</div>
<div id="reproducibility-tools-in-r" class="section level2">
<h2><span class="header-section-number">2.3</span> Reproducibility tools in R</h2>
<p>In this section we introduce four different approaches to integrating R code and text to produce dynamic reports, fully reproducible reports that can automatically be updated if the data change. All four approaches are integrated into RStudio.</p>
<div id="r-markdown" class="section level3 unnumbered">
<h3>R Markdown</h3>
<p>R Markdown (knitr) is the most popular approach to dynamic reporting with R. It combines the lightweight <a href="https://www.markdownguide.org/basic-syntax">Markdown language</a> with R code <em>chunks</em>. R Markdown documents can be rendered as html, pdf, word, etc.</p>
<p>Here is an example of a R markdown file (.Rmd extension) that features R code, inline R code and an image:</p>
<pre><code>---
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Data

```{r}
set.seed(0)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
```

```{r fig.width=4, fig.height=4, fig.cap = paste(&quot;Relationship between high jump and long jump performance (n =&quot;, length(x), &quot;).&quot;)}
plot(x,y)
```

We can also use inline R core: there are `r length(y)` observations in our data.</code></pre>
<p><img src="data/Reproducibility/jp_document.png" /></p>
<p>R Markdown is very easy to use and can produce nice documents. However, it lacks the control of more specialized typesetting languages such as LaTeX.</p>
<p>A good starting point for learning R Markdown is the free online book <a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a>. Note that the textbook you are reading was also produced with R Markdown and the <a href="https://bookdown.org/">Bookdown</a> extension. R Markdown can also be used with chunks from other programming languages, for example, Python, with the help of the <a href="https://cloud.r-project.org/web/packages/reticulate/index.html">reticulate</a> package.</p>
</div>
<div id="r-notebook" class="section level3 unnumbered">
<h3>R Notebook</h3>
<p>A R Notebook is identical to a R Markdown document, except that we replace the output to <em>html_notebook</em>:</p>
<pre><code>---
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Data

```{r}
set.seed(0)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
```

```{r fig.width=4, fig.height=4, fig.cap = paste(&quot;Relationship between high jump and long jump performance (n =&quot;, length(x), &quot;).&quot;)}
plot(x,y)
```

We can also use inline R core: there are `r length(y)` observations in our data.</code></pre>
<p><img src="data/Reproducibility/jp_notebook.png" /></p>
<p>R Notebooks are more interactive - code chunk results are shown inline and are rendered in real time. That is, we can render individual chunks instead of the entire document.</p>
</div>
<div id="sweave" class="section level3 unnumbered">
<h3>Sweave</h3>
<p>When we require more control over the typsetting, for example, when we are trying to produce an elegant pdf document or adhere to the typsetting standards of an academic journal, we might prefer <em>Sweave</em>. Sweave is an integration of LaTeX and R code - in essence, a LaTeX document with R code chunks. R code is executed when we compile the Sweave document with Sweave and LaTeX.</p>
<p>Here is an example of a Sweave file (.Rnw extension) that demonstrates the use of R code, inline R code and an image:</p>
<pre><code>\documentclass{article}

\begin{document}

\section*{Data}

&lt;&lt;&gt;&gt;=
set.seed(0)
x &lt;- rnorm(100)
y &lt;- rnorm(100)
@

Look at the nice plot in Figure \ref{fig1}.

\begin{figure}[htb]
&lt;&lt;fig=T&gt;&gt;=
plot(x,y)
@
\caption{Relationship between high jump and long jump performance (n = \Sexpr{length(x)}).}\label{fig1}
\end{figure}


\end{document}</code></pre>
<p><img src="data/Reproducibility/sweave.png" /></p>
<p>Sweave gives us all the typsetting control of LaTeX at the expense of more code and having to compile the LaTeX as well. A good starting point for Sweave is this compact <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/doc/Sweave.pdf">Sweave manual</a>.</p>
</div>
<div id="shiny-web-apps-and-dashboards" class="section level3 unnumbered">
<h3>Shiny web apps and dashboards</h3>
<p><a href="https://cran.r-project.org/web/packages/shiny/index.html">Shiny</a> is an R package that makes it easy to build interactive applications with R. Shiny can be used to produce standalone web apps and dashboards or it can be embedded into R Markdown documents.</p>
<p>Shiny is useful for rapid development of user-friendly interfaces to interactive analyses of our data. These <a href="https://shiny.rstudio.com/tutorial/">Shiny tutorials</a> are a good starting point for further study.</p>
</div>
</div>
<div id="reproducibility-tools-in-python" class="section level2">
<h2><span class="header-section-number">2.4</span> Reproducibility tools in Python</h2>
<p>Python offers a variety of similar tools to R. It provides Jupyter notebooks with multiple options to create reproducible Python code with dynamic visualizations, presentations and exports to different formats. We already presented installation of Jupyter notebooks in Chapter <a href="python-introduction-chapter.html#python-introduction-chapter">1</a>.</p>
<p>The <em>NBConvert</em> tool allows you to convert a Jupyter <em>.ipynb</em> notebook document file into another format. The <a href="https://media.readthedocs.org/pdf/nbconvert/latest/nbconvert.pdf">nbconvert documentation</a> contains a complete description of this tool’s capabilities. It allows for:</p>
<ul>
<li>presentation of information in familiar formats, such as PDF.</li>
<li>publishing of research using LaTeX and opens the door for embedding notebooks in papers.</li>
<li>collaboration with others who may not use the notebook in their work.</li>
<li>sharing contents with many people via the web using HTML.</li>
</ul>
<p>Overall, notebook conversion and the nbconvert tool give scientists and researchers the flexibility to deliver information in a timely way across different formats. Primarily, the nbconvert tool allows you to convert a Jupyter <em>.ipynb</em> notebook document file into another static format including HTML, LaTeX, PDF, Markdown, reStructuredText, and more. The nbconvert tool can also add productivity to your workflow when used to execute notebooks programmatically.</p>
<p>If used as a Python library (<code>import nbconvert</code>), nbconvert adds notebook conversion within a project. For example, nbconvert is used to implement the “Download as” feature within the Jupyter Notebook web application. When used as a command line tool (<code>jupyter nbconvert</code>), users can conveniently convert just one or a batch of notebook files to another format.</p>
<div id="jupyter-dashboards" class="section level3 unnumbered">
<h3>Jupyter Dashboards</h3>
<p>A <a href="https://jupyter-dashboards-layout.readthedocs.io/en/latest/">jupyter dashboard</a> is a jupyter notebook with the dashboards layout extension, where we can arrange your notebook outputs (text, plots, widgets, etc.) in a grid - or report-like layouts. The layouts are saved in the notebook document. When in a jupyter notebook, we should see the dashboard view extension to control the dashboard settings:</p>
<p><img src="data/Reproducibility/jupyter_dashboard.png" /></p>
<p>Jupyter notebooks and dashboards are also widely used, support a large number of programming languages and they provide:</p>
<ul>
<li>Documentation and literate programming by combining rich-text narrative concepts &amp; machine-readable code. The notebeook itself is a data-structure with metadata that can be easily read and parsed.</li>
<li>Exploration &amp; development: Intermediate steps are saved in a clean, well documented format</li>
<li>Communication/Collaboration: sharing research with peers, collaborators, reviewers, public</li>
<li>Publishing: It is simple and quick switch between the development &amp; publishing stage</li>
</ul>
<p>In a combination with <a href="https://ipywidgets.readthedocs.io/en/latest">jupyter widgets</a>, dynamic dashboards can be created easily. Below we show an example of a general dashboard, where a user selects a location and weather data is extracted from the Web. Along with the data a location of a Weather station is also visualized.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="reproducibility.html#cb72-1"></a><span class="im">import</span> ipywidgets <span class="im">as</span> widgets</span>
<span id="cb72-2"><a href="reproducibility.html#cb72-2"></a><span class="im">from</span> ipywidgets <span class="im">import</span> interact</span>
<span id="cb72-3"><a href="reproducibility.html#cb72-3"></a><span class="im">import</span> urllib.request</span>
<span id="cb72-4"><a href="reproducibility.html#cb72-4"></a><span class="im">from</span> lxml <span class="im">import</span> etree</span>
<span id="cb72-5"><a href="reproducibility.html#cb72-5"></a><span class="im">import</span> folium</span>
<span id="cb72-6"><a href="reproducibility.html#cb72-6"></a></span>
<span id="cb72-7"><a href="reproducibility.html#cb72-7"></a>w <span class="op">=</span> widgets.Dropdown(</span>
<span id="cb72-8"><a href="reproducibility.html#cb72-8"></a>    options<span class="op">=</span>[(<span class="st">&quot;Ljubljana&quot;</span>, <span class="st">&quot;LJUBL-ANA_BEZIGRAD&quot;</span>), (<span class="st">&quot;Celje&quot;</span>, <span class="st">&quot;CELJE&quot;</span>),</span>
<span id="cb72-9"><a href="reproducibility.html#cb72-9"></a>             (<span class="st">&quot;Kočevje&quot;</span>, <span class="st">&quot;KOCEVJE&quot;</span>), (<span class="st">&quot;Novo mesto&quot;</span>, <span class="st">&quot;NOVO-MES&quot;</span>)],</span>
<span id="cb72-10"><a href="reproducibility.html#cb72-10"></a>    value<span class="op">=</span><span class="st">&quot;LJUBL-ANA_BEZIGRAD&quot;</span>,</span>
<span id="cb72-11"><a href="reproducibility.html#cb72-11"></a>    description<span class="op">=</span><span class="st">&#39;Location:&#39;</span>,</span>
<span id="cb72-12"><a href="reproducibility.html#cb72-12"></a>)</span>
<span id="cb72-13"><a href="reproducibility.html#cb72-13"></a></span>
<span id="cb72-14"><a href="reproducibility.html#cb72-14"></a><span class="at">@interact</span>(location<span class="op">=</span>w)</span>
<span id="cb72-15"><a href="reproducibility.html#cb72-15"></a><span class="kw">def</span> f(location):</span>
<span id="cb72-16"><a href="reproducibility.html#cb72-16"></a>    url <span class="op">=</span> <span class="ss">f&quot;http://meteo.arso.gov.si/uploads/probase/www/observ/surface/text/en/observation_</span><span class="sc">{</span>location<span class="sc">}</span><span class="ss">_latest.xml&quot;</span></span>
<span id="cb72-17"><a href="reproducibility.html#cb72-17"></a>    xml <span class="op">=</span> etree.XML(urllib.request.urlopen(url).read())</span>
<span id="cb72-18"><a href="reproducibility.html#cb72-18"></a>    lat <span class="op">=</span> etree.XPath(<span class="st">&quot;//domain_lat/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-19"><a href="reproducibility.html#cb72-19"></a>    lon<span class="op">=</span> etree.XPath(<span class="st">&quot;//domain_lon/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-20"><a href="reproducibility.html#cb72-20"></a>    station_name <span class="op">=</span> etree.XPath(<span class="st">&quot;//domain_title/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-21"><a href="reproducibility.html#cb72-21"></a>    last_updated <span class="op">=</span> etree.XPath(<span class="st">&quot;//tsUpdated/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-22"><a href="reproducibility.html#cb72-22"></a>    weather <span class="op">=</span> etree.XPath(<span class="st">&quot;//nn_shortText/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-23"><a href="reproducibility.html#cb72-23"></a>    temp <span class="op">=</span> etree.XPath(<span class="st">&quot;//t/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-24"><a href="reproducibility.html#cb72-24"></a>    humidity <span class="op">=</span> etree.XPath(<span class="st">&quot;//rh/text()&quot;</span>)(xml)[<span class="dv">0</span>]</span>
<span id="cb72-25"><a href="reproducibility.html#cb72-25"></a>    </span>
<span id="cb72-26"><a href="reproducibility.html#cb72-26"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Location: </span><span class="sc">{</span>station_name<span class="sc">}</span><span class="ch">\n</span><span class="ss">Last updated: </span><span class="sc">{</span>last_updated<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">&quot;</span>)</span>
<span id="cb72-27"><a href="reproducibility.html#cb72-27"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Weather info: </span><span class="sc">{</span>weather<span class="sc">}</span><span class="ch">\n</span><span class="ss">Temperature: </span><span class="sc">{</span>temp<span class="sc">}</span><span class="ss">°C</span><span class="ch">\n</span><span class="ss">Humidity: </span><span class="sc">{</span>humidity<span class="sc">}</span><span class="ss">%&quot;</span>)</span>
<span id="cb72-28"><a href="reproducibility.html#cb72-28"></a>    </span>
<span id="cb72-29"><a href="reproducibility.html#cb72-29"></a>    slovenia_map <span class="op">=</span> folium.Map(location<span class="op">=</span>[<span class="dv">46</span>, <span class="fl">14.5</span>], zoom_start<span class="op">=</span><span class="dv">9</span>, tiles<span class="op">=</span><span class="st">&#39;Stamen Terrain&#39;</span>)</span>
<span id="cb72-30"><a href="reproducibility.html#cb72-30"></a>    folium.Marker([<span class="fl">46.0658</span>,<span class="fl">14.5172</span>], icon<span class="op">=</span>folium.Icon(color<span class="op">=</span><span class="st">&#39;green&#39;</span>,  icon<span class="op">=</span><span class="st">&#39;ok-sign&#39;</span>)).add_to(slovenia_map)</span>
<span id="cb72-31"><a href="reproducibility.html#cb72-31"></a>    display(slovenia_map)</span></code></pre></div>
<p><img src="data/Reproducibility/general.png" /></p>
<p>There exist many possible options for graph visualizations (e.g. <a href="https://plot.ly/">Plotly</a>) and integrations of common libraries such as <a href="https://matplotlib.org/">matplotlib</a>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="reproducibility.html#cb73-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb73-2"><a href="reproducibility.html#cb73-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb73-3"><a href="reproducibility.html#cb73-3"></a><span class="im">import</span> math</span>
<span id="cb73-4"><a href="reproducibility.html#cb73-4"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb73-5"><a href="reproducibility.html#cb73-5"></a></span>
<span id="cb73-6"><a href="reproducibility.html#cb73-6"></a><span class="kw">def</span> showGraph(scale):</span>
<span id="cb73-7"><a href="reproducibility.html#cb73-7"></a>    x <span class="op">=</span> np.arange(<span class="dv">0</span>, math.pi<span class="op">*</span>scale, <span class="fl">0.05</span>)</span>
<span id="cb73-8"><a href="reproducibility.html#cb73-8"></a>    y <span class="op">=</span> np.sin(x)</span>
<span id="cb73-9"><a href="reproducibility.html#cb73-9"></a>    fig <span class="op">=</span> plt.figure()</span>
<span id="cb73-10"><a href="reproducibility.html#cb73-10"></a>    ax <span class="op">=</span> fig.add_axes([<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb73-11"><a href="reproducibility.html#cb73-11"></a>    ax.plot(x, y)</span>
<span id="cb73-12"><a href="reproducibility.html#cb73-12"></a>    ax.set_xlabel(<span class="st">&quot;Angle&quot;</span>)</span>
<span id="cb73-13"><a href="reproducibility.html#cb73-13"></a>    ax.set_ylabel(<span class="st">&quot;sine&quot;</span>)</span>
<span id="cb73-14"><a href="reproducibility.html#cb73-14"></a></span>
<span id="cb73-15"><a href="reproducibility.html#cb73-15"></a>interact(showGraph, scale <span class="op">=</span> widgets.IntSlider(value<span class="op">=</span><span class="dv">4</span>, description<span class="op">=</span><span class="st">&#39;Scale&#39;</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">10</span>, <span class="bu">min</span><span class="op">=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="data/Reproducibility/sine.png" /></p>
</div>
</div>
<div id="further-reading-and-references-1" class="section level2">
<h2><span class="header-section-number">2.5</span> Further reading and references</h2>
<ul>
<li><p>Science is in a replication and reproducibility crisis. In some fields more than half of published studes fail to replicate and most studies are not reproducible: <em>Baker, M. (2016). 1,500 scientists lift the lid on reproducibility. Nature News, 533(7604), 452.</em></p></li>
<li><p>Preregistration will eventually become the standard for publication of empirical research: <em>Nosek, B. A., Ebersole, C. R., DeHaven, A. C., &amp; Mellor, D. T. (2018). The preregistration revolution. Proceedings of the National Academy of Sciences, 115(11), 2600-2606.</em></p></li>
</ul>
</div>
<div id="learning-outcomes-1" class="section level2">
<h2><span class="header-section-number">2.6</span> Learning outcomes</h2>
<p>Data science students should work towards obtaining the knowledge and the skills that enable them to:</p>
<ul>
<li>Produce reproducible data science analyses.</li>
<li>Identify reproducibility flaws in own and other peoples’ research.</li>
<li>Distinguish between reproducibility and replication.</li>
</ul>
</div>
<div id="practice-problems-1" class="section level2">
<h2><span class="header-section-number">2.7</span> Practice problems</h2>
<ol style="list-style-type: decimal">
<li><p>Create a short R Markdown, Sweave and/or Jupyter Notebook that loads some data, draws a plot, prints a table and contains some text with an example of inline use of code.</p></li>
<li><p>Consider the following experiment of drawing <span class="math inline">\(m &gt; 1\)</span> samples from a distribution (standard normal or uniform) and taking their average, repeating this process for <span class="math inline">\(n &gt; 1\)</span> times and plotting the histogram of these <span class="math inline">\(n\)</span> averages:</p></li>
</ol>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="reproducibility.html#cb74-1"></a>n &lt;-<span class="st"> </span><span class="dv">5000</span></span>
<span id="cb74-2"><a href="reproducibility.html#cb74-2"></a>m &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb74-3"><a href="reproducibility.html#cb74-3"></a><span class="kw">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb74-4"><a href="reproducibility.html#cb74-4"></a>dist &lt;-<span class="st"> &quot;normal&quot;</span></span>
<span id="cb74-5"><a href="reproducibility.html#cb74-5"></a></span>
<span id="cb74-6"><a href="reproducibility.html#cb74-6"></a>all &lt;-<span class="st"> </span><span class="kw">c</span>()</span>
<span id="cb74-7"><a href="reproducibility.html#cb74-7"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) {</span>
<span id="cb74-8"><a href="reproducibility.html#cb74-8"></a>  <span class="cf">if</span> (dist <span class="op">==</span><span class="st"> &quot;normal&quot;</span>) {</span>
<span id="cb74-9"><a href="reproducibility.html#cb74-9"></a>    x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(m)</span>
<span id="cb74-10"><a href="reproducibility.html#cb74-10"></a>  } <span class="cf">else</span> {</span>
<span id="cb74-11"><a href="reproducibility.html#cb74-11"></a>    x &lt;-<span class="st"> </span><span class="kw">runif</span>(m)</span>
<span id="cb74-12"><a href="reproducibility.html#cb74-12"></a>  }</span>
<span id="cb74-13"><a href="reproducibility.html#cb74-13"></a>  all &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">mean</span>(x), all)</span>
<span id="cb74-14"><a href="reproducibility.html#cb74-14"></a>}</span>
<span id="cb74-15"><a href="reproducibility.html#cb74-15"></a></span>
<span id="cb74-16"><a href="reproducibility.html#cb74-16"></a><span class="kw">hist</span>(all, <span class="dt">breaks =</span> <span class="kw">sqrt</span>(n))</span></code></pre></div>
<p><img src="05-Dynamic_reports_and_reproducibility_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Create a Shiny App/Dashboard and/or Jupyter Dashboard that draws such a histogram and allows you to interactively change <span class="math inline">\(n\)</span>, <span class="math inline">\(m\)</span> and which distribution is used (support standard normal, uniform and a third distribution of choice). Use the Dashboard to visually explore if the sample average tend to a normal distribution as <span class="math inline">\(m\)</span> grows larger.</p>

</div>
</div>
<script type="application/json" class="js-hypothesis-config">
	{
	  "openSidebar": false,
	  "showHighlights": "whenSidebarOpen",
	  "enableShareLinks": false
	}
</script>
<script src="https://hypothes.is/embed.js" async></script>
            </section>

          </div>
        </div>
      </div>
<a href="python-introduction-chapter.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scraping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
